/*
 2013 http://101.ru
 @version 1.0.1
 @author Vlasov Alexey <lexa1278 @ gmail.com> / https://www.facebook.com/vlasovalexey
*/


if("undefined"==typeof uppod_show_advertasing)var uppod_show_advertasing=!1;if("object"!=typeof playerAPI||!playerAPI instanceof"object")var playerAPI={};
playerAPI.Uppod=new function(){var c=this,b={},m={},B=!1,D={playerid:"",swf:"/static/js/uppod/uppod.swf",flashVers:"10.0.0",width:200,height:50,showPlayer:!1,classPlay:"classPlay",classStop:"classStop",classPause:"classPause",element:"",heightParent:18,stopEvent:"pause",advertising:!1,checkplay:!1};this.swfObj||(this.swfObj=function(){function a(){if(!x){try{var a=k.getElementsByTagName("body")[0].appendChild(k.createElement("span"));a.parentNode.removeChild(a)}catch(h){return}x=!0;for(var a=F.length,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               n=0;n<a;n++)F[n]()}}function b(a){x?a():F[F.length]=a}function c(a){if(typeof q.addEventListener!=p)q.addEventListener("load",a,!1);else if(typeof k.addEventListener!=p)k.addEventListener("load",a,!1);else if(typeof q.attachEvent!=p)U(q,"onload",a);else if("function"==typeof q.onload){var h=q.onload;q.onload=function(){h();a()}}else q.onload=a}function l(){var a=k.getElementsByTagName("body")[0],h=k.createElement(w);h.setAttribute("type",G);var n=a.appendChild(h);if(n){var b=0;(function(){if(typeof n.GetVariable!=
    p){var c=n.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),f.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else if(10>b){b++;setTimeout(arguments.callee,10);return}a.removeChild(h);n=null;g()})()}else g()}function g(){var a=t.length;if(0<a)for(var h=0;h<a;h++){var n=t[h].id,b=t[h].callbackFn,c={success:!1,id:n};if(0<f.pv[0]){var d=r(n);if(d)if(!H(t[h].swfVersion)||f.wk&&312>f.wk)if(t[h].expressInstall&&v()){c={};c.data=t[h].expressInstall;c.width=d.getAttribute("width")||"0";
    c.height=d.getAttribute("height")||"0";d.getAttribute("class")&&(c.styleclass=d.getAttribute("class"));d.getAttribute("align")&&(c.align=d.getAttribute("align"));for(var e={},d=d.getElementsByTagName("param"),k=d.length,g=0;g<k;g++)"movie"!=d[g].getAttribute("name").toLowerCase()&&(e[d[g].getAttribute("name")]=d[g].getAttribute("value"));L(c,e,n,b)}else B(d),b&&b(c);else y(n,!0),b&&(c.success=!0,c.ref=m(n),b(c))}else y(n,!0),b&&((n=m(n))&&typeof n.SetVariable!=p&&(c.success=!0,c.ref=n),b(c))}}function m(a){var h=
    null;(a=r(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=p?h=a:(a=a.getElementsByTagName(w)[0])&&(h=a));return h}function v(){return!I&&H("6.0.65")&&(f.win||f.mac)&&!(f.wk&&312>f.wk)}function L(a,h,n,c){I=!0;M=c||null;O={success:!1,id:n};var b=r(n);if(b){"OBJECT"==b.nodeName?(E=z(b),J=null):(E=b,J=n);a.id=P;if(typeof a.width==p||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==p||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";k.title=k.title.slice(0,
    47)+" - Flash Player Installation";c=f.ie&&f.win?"ActiveX":"PlugIn";c="MMredirectURL="+q.location.toString().replace(/&/g,"%26")+"&MMplayerType="+c+"&MMdoctitle="+k.title;h.flashvars=typeof h.flashvars!=p?h.flashvars+("&"+c):c;f.ie&&f.win&&4!=b.readyState&&(c=k.createElement("div"),n+="SWFObjectNew",c.setAttribute("id",n),b.parentNode.insertBefore(c,b),b.style.display="none",function(){4==b.readyState?b.parentNode.removeChild(b):setTimeout(arguments.callee,10)}());A(a,h,n)}}function B(a){if(f.ie&&
    f.win&&4!=a.readyState){var h=k.createElement("div");a.parentNode.insertBefore(h,a);h.parentNode.replaceChild(z(a),h);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(z(a),a)}function z(a){var h=k.createElement("div");if(f.win&&f.ie)h.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(w)[0])if(a=a.childNodes)for(var c=a.length,b=0;b<c;b++)1==a[b].nodeType&&"PARAM"==a[b].nodeName||8==a[b].nodeType||
h.appendChild(a[b].cloneNode(!0));return h}function A(a,h,b){var c,d=r(b);if(f.wk&&312>f.wk)return c;if(d)if(typeof a.id==p&&(a.id=b),f.ie&&f.win){var e="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?h.movie=a[g]:"styleclass"==g.toLowerCase()?e+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(e+=" "+g+'="'+a[g]+'"'));g="";for(var l in h)h[l]!=Object.prototype[l]&&(g+='<param name="'+l+'" value="'+h[l]+'" />');d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+
    e+">"+g+"</object>";K[K.length]=a.id;c=r(a.id)}else{l=k.createElement(w);l.setAttribute("type",G);for(var m in a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?l.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&l.setAttribute(m,a[m]));for(e in h)h[e]!=Object.prototype[e]&&"movie"!=e.toLowerCase()&&(a=l,g=e,m=h[e],b=k.createElement("param"),b.setAttribute("name",g),b.setAttribute("value",m),a.appendChild(b));d.parentNode.replaceChild(l,d);c=l}return c}function D(a){var h=r(a);h&&"OBJECT"==
    h.nodeName&&(f.ie&&f.win?(h.style.display="none",function(){if(4==h.readyState){var b=r(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}else setTimeout(arguments.callee,10)}()):h.parentNode.removeChild(h))}function r(a){var b=null;try{b=k.getElementById(a)}catch(c){}return b}function U(a,b,c){a.attachEvent(b,c);C[C.length]=[a,b,c]}function H(a){var b=f.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>
    a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function Q(a,b,c,d){if(!f.ie||!f.mac){var e=k.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(N=s=null),s&&N==c||(d=k.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),s=e.appendChild(d),f.ie&&f.win&&typeof k.styleSheets!=p&&0<k.styleSheets.length&&(s=k.styleSheets[k.styleSheets.length-1]),N=c),f.ie&&f.win?s&&typeof s.addRule==w&&s.addRule(a,b):s&&typeof k.createTextNode!=
    p&&s.appendChild(k.createTextNode(a+" {"+b+"}")))}}function y(a,b){if(R){var c=b?"visible":"hidden";x&&r(a)?r(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function S(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=p?encodeURIComponent(a):a}var p="undefined",w="object",G="application/x-shockwave-flash",P="SWFObjectExprInst",q=window,k=document,u=navigator,T=!1,F=[function(){T?l():g()}],t=[],K=[],C=[],E,J,M,O,x=!1,I=!1,s,N,R=!0,f=function(){var a=typeof k.getElementById!=p&&typeof k.getElementsByTagName!=
    p&&typeof k.createElement!=p,b=u.userAgent.toLowerCase(),c=u.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",g=[0,0,0],f=null;if(typeof u.plugins!=p&&typeof u.plugins["Shockwave Flash"]==w)!(f=u.plugins["Shockwave Flash"].description)||typeof u.mimeTypes!=p&&u.mimeTypes[G]&&!u.mimeTypes[G].enabledPlugin||(T=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(f.replace(/^(.*)\..*$/,
    "$1"),10),g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof q.ActiveXObject!=p)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(f=l.GetVariable("$version"))&&(e=!0,f=f.split(" ")[1].split(","),g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(m){}return{w3:a,pv:g,wk:b,ie:e,win:d,mac:c}}();(function(){f.w3&&((typeof k.readyState!=p&&"complete"==k.readyState||typeof k.readyState==
    p&&(k.getElementsByTagName("body")[0]||k.body))&&a(),x||(typeof k.addEventListener!=p&&k.addEventListener("DOMContentLoaded",a,!1),f.ie&&f.win&&(k.attachEvent("onreadystatechange",function(){"complete"==k.readyState&&(k.detachEvent("onreadystatechange",arguments.callee),a())}),q==top&&function(){if(!x){try{k.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}()),f.wk&&function(){x||(/loaded|complete/.test(k.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();
    (function(){f.ie&&f.win&&window.attachEvent("onunload",function(){for(var a=C.length,b=0;b<a;b++)C[b][0].detachEvent(C[b][1],C[b][2]);a=K.length;for(b=0;b<a;b++)D(K[b]);for(var c in f)f[c]=null;f=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(f.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;t[t.length]=e;y(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(f.w3)return m(a)},embedSWF:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        c,e,g,k,l,m,q,r,s){var t={success:!1,id:c};f.w3&&!(f.wk&&312>f.wk)&&a&&c&&e&&g&&k?(y(c,!1),b(function(){e+="";g+="";var b={};if(r&&typeof r===w)for(var d in r)b[d]=r[d];b.data=a;b.width=e;b.height=g;d={};if(q&&typeof q===w)for(var f in q)d[f]=q[f];if(m&&typeof m===w)for(var u in m)d.flashvars=typeof d.flashvars!=p?d.flashvars+("&"+u+"="+m[u]):u+"="+m[u];if(H(k))f=A(b,d,c),b.id==c&&y(c,!0),t.success=!0,t.ref=f;else{if(l&&v()){b.data=l;L(b,d,c,s);return}y(c,!0)}s&&s(t)})):s&&s(t)},switchOffAutoHideShow:function(){R=
        !1},ua:f,getFlashPlayerVersion:function(){return{major:f.pv[0],minor:f.pv[1],release:f.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(a,b,c){if(f.w3)return A(a,b,c)},showExpressInstall:function(a,b,c,d){f.w3&&v()&&L(a,b,c,d)},removeSWF:function(a){f.w3&&D(a)},createCSS:function(a,b,c,d){f.w3&&Q(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=k.location.search||k.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return S(b);for(var b=b.split("&"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return S(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(I){var a=r(P);a&&E&&(a.parentNode.replaceChild(E,a),J&&(y(J,!0),f.ie&&f.win&&(E.style.display="block")),M&&M(O));I=!1}}}}());this.checkFlashPlugin=function(){var a=navigator.userAgent.toLowerCase(),b=0,c;if(-1!=a.indexOf("msie")&&-1==a.indexOf("opera")&&-1==a.indexOf("webtv"))try{for(c=3;12>=c;c++)eval('new ActiveXObject("ShockwaveFlash.ShockwaveFlash.'+
    c+'")')&&(b=c)}catch(l){}else for(c in navigator.plugins)a=navigator.plugins[c],void 0!=a.name&&-1<a.name.indexOf("Flash")&&(a=/\d+/.exec(a.description),null==a&&(a=0),a>b&&(b=a));return b?!0:!1};B=c.checkFlashPlugin();this.ShowError=function(a){return!1};this.AddParamPlayer=function(a,d,e,l){e=c.mergeParams(D,e);"undefined"!=typeof e.element&&""!=e.element&&(e.playerid=e.element,jQuery(e.element).die("click"),jQuery(e.element).live("click",function(){var a=jQuery(this).attr("playerid");if("undefined"!=
    typeof a&&null!=a){if("undefined"!=typeof m[a]&&null!=m[a])return c.StopPlayer(a);if(!1===c.CheckAccessPlay(a))return!1;c.StopAllPlayer(a);c.PlayerPlay(a);return!1}!1==c.CheckUppodObject(a)&&"undefined"!=typeof m[a]&&delete m[a];var d=c.getAttributPlayer(this,"setting"),e=c.getAttributPlayer(this,"flashvars"),l=c.getAttributPlayer(this,"params"),v=c.getAttributPlayer(this,"event");jQuery(this).attr("playerid",d.playerid).attr("id","player_"+d.playerid);"undefined"==typeof b[a]&&c.RecordParam(e,l,
    d,v);c.PlayerPlay(d.playerid);return!1}));return c.RecordParam(a,d,e,l)};this.getAttributPlayer=function(a,d){var e=jQuery(a).attr("element");if("undefined"==typeof e||null==e)return c.ShowError('Not found attribute "element"');if("undefined"==typeof b[e]||null==b[e])return c.ShowError('Default settings for element "'+e+'" undefined');var l=jQuery(a).attr(d);if("undefined"!=l&&null!=l)try{l=jQuery.parseJSON(l),l=c.mergeParams(b[e][d],l)}catch(g){c.ShowError('Error parse params "'+d+'" to JSON format'),
    l="undefined"!=typeof b[e][d]?b[e][d]:{}}else l=b[e][d];return l};this.mergeParams=function(a,b){var c={};jQuery.each(a,function(a,b){c[a]=b});jQuery.each(b,function(a,b){c[a]=b});return c};this.RecordParam=function(a,d,e,l){if("object"==typeof b[e.playerid])return!0;if("undefined"==typeof e.playerid||null==e.playerid||""==e.playerid)return c.ShowError('Player ID "'+e.playerid+'" is undefined');var g=e.playerid;"undefined"==typeof b[g]&&(b[g]={});a.uid=g;b[g].flashvars="undefined"==typeof a?{}:a;
    b[g].params="undefined"==typeof d?{}:d;b[g].setting="undefined"==typeof e?{}:e;b[g].event="undefined"==typeof l?{}:l;return!0};this.CreatePlayer=function(a){jQuery("#"+a).text("\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043b\u0435\u0435\u0440\u0430...");if(!1===B)return jQuery("#"+a).html('\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 <a href="http://get.adobe.com/ru/flashplayer/" target="_blank">Adobe Flash Player</a>'),!1;if("undefined"==typeof b[a])return c.ShowError('Player "'+
    a+"\" doesn't have setting");try{new c.swfObj.embedSWF(b[a].setting.swf,b[a].setting.playerid,b[a].setting.width,b[a].setting.height,b[a].setting.flashVers,!1,b[a].flashvars,b[a].params),b[a].setting.heightParent=jQuery("#"+b[a].setting.playerid).parent().css("height"),b[a].setting.heightParent&&"0px"!=b[a].setting.heightParent||(b[a].setting.heightParent=D.heightParent+"px")}catch(d){return c.ShowError('Error create player "'+a+'". '+d.message)}return!0};var z=0;this.ExecuteComandAfterInit=function(a){return 9<
    z?(z=0,c.ShowError('Init player "'+a+'" is fail')):!0!==b[a].setting.init?(z++,setTimeout(function(){c.ExecuteComandAfterInit(a)},600),!1):c.PlayerPlay(a)};this.CheckUppodObject=function(a){for(var c=document.getElementsByTagName("object"),e=0;e<c.length;e++)if(c[e].id==a)return b[a].setting.init=!0;return!1};this.CheckAccessPlay=function(a){return!0===window.uppod_show_advertasing?"undefined"!=typeof b[a].setting&&!0==b[a].setting.advertising?!0:!1:!0};this.PlayerPlay=function(a){if("undefined"==
    typeof b[a])return c.ShowError('Player "'+a+'" is undefined');if(!1===c.CheckAccessPlay(a))return!1;if(!1===c.CheckUppodObject(a))return c.ShowError('Player "'+a+'" does not exist'),b[a].setting.init=!1,!0===c.CreatePlayer(a)?setTimeout(function(){c.CheckPlayerPlay(a,1)},2E3):c.ShowError('Error make player with ID "'+a+'"'),!1;if(1==c.uppodGet(a,"getstatus"))return!0;!0===b[a].setting.showPlayer&&jQuery("#"+b[a].setting.playerid).css("visibility","visible").parent().css({height:b[a].setting.heightParent});
    c.uppodSend(a,"play");return!0};this.StopPlayer=function(a){if(1>c.uppodGet(a,"getstatus"))return!0;!0===b[a].setting.showPlayer&&jQuery("#"+b[a].setting.playerid).css("visibility","hidden").parent().css({height:"0px"});c.uppodSend(a,"undefined"!=typeof b[a].setting.stopEvent?b[a].setting.stopEvent:"stop");m[a]=null;return!1};this.StopAllPlayer=function(a){if(1>m.length)return!0;jQuery.each(m,function(b,e){a!=b&&c.StopPlayer(b)});return!0};this.CheckPlayerPlay=function(a,d){if(!1==b[a].setting.checkplay&&
    0==d)return!0;if(!1===c.CheckAccessPlay(a))return!1;if(1<c.uppodGet(a,"getime"))return!0;c.uppodSend(a,"stop");sessionStorage.setItem("trycounterstartplayer","1");return c.uppodSend(a,"play")};this.ChangeIconPlayer=function(a,c){if("play"==c)jQuery("#player_"+a).addClass(b[a].setting.classStop),jQuery("#player_"+a).removeClass(b[a].setting.classPlay);else if("stop"==c||"pause"==c||"end"==c)jQuery("#player_"+a).removeClass(b[a].setting.classStop),jQuery("#player_"+a).addClass(b[a].setting.classPlay)};
    this.uppodInit=function(a){b[a].setting.init=!0;return!1};this.uppodSend=function(a,b,e){try{document.getElementById(a).sendToUppod(b,e?e:""),"play"==b&&"function"==typeof sessionStorage.getItem&&sessionStorage.removeItem("countreloadpage"),sessionStorage.removeItem("countertrysendcommand")}catch(l){if("undefined"!=typeof l.message&&-1<l.message.indexOf("NPObject"))return c.ShowError("Exeption: "+l.message),!1;if("function"==typeof sessionStorage.getItem||"object"==typeof sessionStorage.getItem){var g=
        parseInt(sessionStorage.getItem("countertrysendcommand"));if(null==g||isNaN(g))g=0;if(2<g)return!1;g++;sessionStorage.setItem("countertrysendcommand",g);setTimeout(function(){c.uppodSend(a,b,e)},1E3)}}return!1};this.uppodGet=function(a,b,e){try{return document.getElementById(a).getUppod(b,e?e:"")}catch(l){return c.ShowError(l.message),!1}};this.uppodEvent=function(a,d){c.ShowError(a+":"+d);switch(d){case "init":b[a].setting.init=!0;break;case "start":setTimeout(function(){c.CheckPlayerPlay(a,0)},
        5E3);break;case "play":m[a]=1;!0===b[a].setting.showPlayer&&jQuery("#"+b[a].setting.playerid).css("visibility","visible").parent().css({height:b[a].setting.heightParent});c.StopAllPlayer(a);break;case "pause":delete m[a];break;case "stop":!0===b[a].setting.showPlayer&&jQuery("#"+b[a].setting.playerid).css("visibility","hidden").parent().css({height:"0px"});delete m[a];break;case "end":!0===b[a].setting.showPlayer&&jQuery("#"+b[a].setting.playerid).css("visibility","hidden").parent().css({height:"0px"});
        delete m[a];break;case "error":delete m[a],d="stop"}if("function"==typeof b[a].event[d]||"object"==typeof b[a].event[d])b[a].event[d](a,d,"undefined"==typeof b[a].event.param?"":b[a].event.param);c.ChangeIconPlayer(a,d);return!0};var v=0,A=0;this.RefreshCountertimer=function(){if(0<v)var a=parseInt(v/60),b=parseInt(v%60);else b=a=0;10>b&&(b="0"+b);jQuery("#duration").html(a+":"+b);if(0>v)return clearInterval(A),!1};this.TitleSong=function(a){clearInterval(A);if("jingle101"==a.module)return jQuery("#titlesong").html("\u041e\u0436\u0438\u0434\u0430\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0442\u0440\u0435\u043a..."),
        !1;jQuery("#titlesong").html(a.title);jQuery("#addfavoritetracksfromair").attr("favid",a.id?a.id:0).attr("favmodule",a.module?a.module:"").show();jQuery("#polltrackaction").attr("data-trackid",a.id?a.id:0).attr("data-module",a.module?a.module:"").removeClass("pollok").addClass("poll").show();v=a.duration;0<v&&(A=setInterval(function(){v--;c.RefreshCountertimer()},1E3))}};function uppodGet(c,b){try{return document.getElementById(c).getUppod(b)}catch(m){playerAPI.Uppod.ShowError(m.message)}}
function uppodInit(c){playerAPI.Uppod.players[c].setting.init=!0}function uppodSend(c,b,m){try{return document.getElementById(c).sendToUppod(b,m?m:"")}catch(B){playerAPI.Uppod.ShowError(B.message)}}function uppodEvent(c,b,m){playerAPI.Uppod.uppodEvent(c,b,m)}function _setTitles(c){playerAPI.Uppod.TitleSong(c)};